<!DOCTYPE html>
<html>
<head>
    <title>Web Scraper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Authentication Scripts - MUST be at the top -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script>
      // Protect this page - redirect to login if not authenticated
      async function protectPage() {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) {
          window.location.href = 'login.html';
        }
      }
      protectPage();
    </script>

    <!-- Logout Button -->
    <button onclick="logout()" style="position: absolute; top: 20px; right: 20px; padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; z-index: 1000;">Logout</button>

    <div class="container">
        <h1>ðŸ”¥ Web Scraper</h1>
        
        <input type="url" id="url" placeholder="https://example.com">
        
        <input type="number" id="maxPages" value="1" min="1" max="5">
        
        <select id="extractionType">
            <option value="markdown">Markdown</option>
            <option value="text">Text</option>
            <option value="json">JSON</option>
        </select>
        
        <button id="scrapeBtn">Scrape Now</button>
        
        <div id="results"></div>
    </div>
    
    <script src="script.js"></script>
    <script src="auth.js"></script>
</body>
</html>